<!DOCTYPE html>
<html lang="en" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">
<head>
<meta charset="utf-8" http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="/software/modules-and-software-packaging" />
<link rel="shortlink" href="/node/651" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<link rel="shortcut icon" href="https://hpc.llnl.gov/sites/all/themes/tid/favicon.ico" type="image/vnd.microsoft.icon" />
<title>Modules and Software Packaging | High Performance Computing</title>
<link type="text/css" rel="stylesheet" href="https://hpc.llnl.gov/sites/default/files/css/css_kShW4RPmRstZ3SpIC-ZvVGNFVAi0WEMuCnI0ZkYIaFw.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://hpc.llnl.gov/sites/default/files/css/css_bq48Es_JAifg3RQWKsTF9oq1S79uSN2WHxC3KV06fK0.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://hpc.llnl.gov/sites/default/files/css/css_vAm-LJc0tkC-w_c6v7Ekq0bW26Pzl31HvPM6kbvK-pc.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://hpc.llnl.gov/sites/default/files/css/css_ca6tstDbY9-H23Ty8uKiDyFQLT1AZftZKldhbTPPnm8.css" media="all" />
<!--[if lt IE 9]><script src="/sites/all/themes/tid/js/html5.js"></script><![endif]-->
</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-651 node-type-user-portal-training-page">
  <div aria="contentinfo"><noscript><img src="https://analytics.llnl.gov/piwik.php?idsite=149" class="no-border" alt="" /></noscript></div>
    <div id="page">
	<div class="unclassified"></div>
	<div class="headertop">
					<div id="skip-nav" role="navigation" aria-labelledby="skip-nav" class="reveal">
  			<a href="#main-content">Skip to main content</a>
			</div>
					</div>
        <div class="headerwrapbg">
                        <div class="headerwrap-portal">
                <div id="masthead" class="site-header container" role="banner">
                    <div class="row">
                        <div class="llnl-logo col-sm-3">
                            <a href="https://www.llnl.gov" target="_blank" title="Lawrence Livermore National Laboratory">
                                <img src="/sites/all/themes/tid/images/llnl-tab-portal.png" alt="LLNL Home" />
                            </a>
                        </div>
                        <div id="logo" class="site-branding col-sm-4">
                                                            <div id="site-logo">
                                        <!--High Performance Computing<br />Livermore Computing Center-->
                                        																					<a href="/user-portal" class="text-dark" title="Livermore Computing Center High Performance Computing">
                                            <img src="/sites/all/themes/tid/images/hpc.png" alt="Portal Home" />
																					</a>
																				
                                </div>
                                                    </div>
                        <div class="col-sm-5">
                            <div id="top-search">
															<div class="input-group">
																	<form class="navbar-form navbar-search navbar-right" action="/software/modules-and-software-packaging" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
      <div class="element-invisible">Search form</div>
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-OWGDa73ctVv4V5huo_qqWEeMD_2fF_gUJocc5UxE8ZQ" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="mainnav">
                    <div class="container">
                        <div class="row">
                            <nav id="Menu" aria-label="Mobile Menu" class="mobilenavi col-md-12"></nav>
                            <nav id="navigation" aria-label="Main Menu">
                                <div id="main-menu" class="main-menu-portal">
                                    <ul class="menu"><li class="first collapsed"><a href="/user-portal">Portal</a></li>
<li class="expanded"><a href="/accounts">Accounts</a><ul class="menu"><li class="first leaf"><a href="/accounts/new-account-setup">New Account Setup</a></li>
<li class="leaf"><a href="/accounts/idm-account-management">IdM Account Management</a></li>
<li class="leaf"><a href="https://hpc.llnl.gov/manuals/access-lc-systems" title="">Access to LC Systems</a></li>
<li class="leaf"><a href="/accounts/computer-coordinator-roles">Computer Coordinator Roles</a></li>
<li class="collapsed"><a href="/accounts/forms">Forms</a></li>
<li class="collapsed"><a href="/accounts/policies">Policies</a></li>
<li class="last leaf"><a href="/accounts/mailing-lists">Mailing Lists</a></li>
</ul></li>
<li class="expanded"><a href="/banks-jobs">Banks &amp; Jobs</a><ul class="menu"><li class="first leaf"><a href="/banks-jobs/allocations">Allocations</a></li>
<li class="expanded"><a href="/banks-jobs/running-jobs">Running Jobs</a><ul class="menu"><li class="first leaf"><a href="/banks-jobs/running-jobs/batch-system-primer">Batch System Primer</a></li>
<li class="leaf"><a href="/banks-jobs/running-jobs/lsf-user-manual">LSF User Manual</a></li>
<li class="leaf"><a href="/banks-jobs/running-jobs/lsf-quick-start-guide">LSF Quick Start Guide</a></li>
<li class="leaf"><a href="/banks-jobs/running-jobs/lsf-commands">LSF Commands</a></li>
<li class="leaf"><a href="/banks-jobs/running-jobs/slurm-user-manual" title="Guide to using the Slurm Workload/Resource Manager">Slurm User Manual</a></li>
<li class="leaf"><a href="/banks-jobs/running-jobs/slurm-quick-start-guide">Slurm Quick Start Guide</a></li>
<li class="leaf"><a href="/banks-jobs/running-jobs/slurm-commands">Slurm Commands</a></li>
<li class="leaf"><a href="/training/tutorials/slurm-and-moab">Slurm and Moab</a></li>
<li class="leaf"><a href="/banks-jobs/running-jobs/batch-system-commands">Batch System Cross-Reference</a></li>
<li class="last leaf"><a href="/banks-jobs/running-jobs/slurm-srun-versus-ibm-csm-jsrun">Slurm srun versus IBM CSM jsrun</a></li>
</ul></li>
<li class="leaf"><a href="https://hpc.llnl.gov/accounts/forms/asc-dat" title="">ASC DAT Request</a></li>
<li class="last leaf"><a href="https://hpc.llnl.gov/accounts/forms/mic-dat" title="">M&amp;IC DAT Request</a></li>
</ul></li>
<li class="expanded"><a href="/hardware">Hardware</a><ul class="menu"><li class="first collapsed"><a href="/hardware/archival-storage-hardware">Archival Storage Hardware</a></li>
<li class="collapsed"><a href="/hardware/platforms">Compute Platforms</a></li>
<li class="leaf"><a href="/hardware/compute-platforms-gpus">Compute Platforms with GPUs</a></li>
<li class="collapsed"><a href="/hardware/file-systems">File Systems</a></li>
<li class="leaf"><a href="/hardware/testbeds">Testbeds</a></li>
<li class="collapsed"><a href="/hardware/zones">Zones (aka &quot;The Enclave&quot;)</a></li>
<li class="leaf"><a href="https://lc.llnl.gov/lorenz/mylc/mylc.cgi" title="">MyLC (Lorenz)</a></li>
<li class="leaf"><a href="https://lc.llnl.gov/cgi-bin/lccgi/customstatus.cgi?" title="">CZ Compute Platform Status</a></li>
<li class="leaf"><a href="https://rzlc.llnl.gov/cgi-bin/lccgi/customstatus.cgi" title="">RZ Compute System Status</a></li>
<li class="leaf"><a href="https://lc.llnl.gov/fsstatus/fsstatus.cgi" title="">CZ File System Status</a></li>
<li class="last leaf"><a href="https://rzlc.llnl.gov/fsstatus/fsstatus.cgi" title="">RZ File System Status</a></li>
</ul></li>
<li class="expanded"><a href="/services">Services</a><ul class="menu"><li class="first collapsed"><a href="/services/green-data-oasis">Green Data Oasis (GDO)</a></li>
<li class="leaf"><a href="https://lc.llnl.gov/lorenz/mylc/mylc.cgi" title="">MyLC (Lorenz)</a></li>
<li class="last leaf"><a href="/services/visualization-services">Visualization Services</a></li>
</ul></li>
<li class="expanded active-trail"><a href="/software" class="active-trail">Software</a><ul class="menu"><li class="first leaf"><a href="/software/archival-storage-software">Archival Storage Software</a></li>
<li class="collapsed"><a href="/software/data-management-tools-projects">Data Management Tools</a></li>
<li class="collapsed"><a href="/software/development-environment-software">Development Environment Software</a></li>
<li class="leaf"><a href="/software/mathematical-software">Mathematical Software</a></li>
<li class="leaf active-trail"><a href="/software/modules-and-software-packaging" class="active-trail active">Modules and Software Packaging</a></li>
<li class="collapsed"><a href="/software/visualization-software">Visualization Software</a></li>
<li class="last leaf"><a href="https://computing.llnl.gov/projects/radiuss" title="">RADIUSS</a></li>
</ul></li>
<li class="last expanded"><a href="/training">Training</a><ul class="menu"><li class="first collapsed"><a href="/training/tutorials">Tutorials</a></li>
<li class="collapsed"><a href="/training/documentation">Documentation &amp; User Manuals</a></li>
<li class="leaf"><a href="/training/technical-bulletins-catalog">Technical Bulletins Catalog</a></li>
<li class="collapsed"><a href="/training/workshop-schedule">Training Events</a></li>
<li class="last leaf"><a href="/training/user-meeting-presentations-archive">User Meeting Presentation Archive</a></li>
</ul></li>
</ul>                                                                            <div id="pagetoggle" class="btn-group btn-toggle pull-right" style="margin-right: 15px;">
                                            <a href="/" class="btn btn-default gs">General Site</a>
                                            <a href="/user-portal" class="btn btn-primary up active">User Portal</a>
                                        </div>
                                                                    </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            </div>
		<div id="main-content" class="l2content">
        <div class="container">
    		<div class="row">
        		                <div id="primary" class="content-area col-sm-12">
					                                        <section id="content" role="nav" class="clearfix col-sm-12">

                                                                                    <div id="breadcrumbs">
                                    <h2 class="element-invisible">breadcrumb menu</h2><nav class="breadcrumb" aria-label="breadcrumb-navigation"><a href="/">Home</a> » <a href="/software">Software</a> » Modules and Software Packaging</nav>                                </div>
                                                    
                                            </section>
                  <main>

                                              <div id="content_top">
                                <div class="region region-content-top">
  <div id="block-print-ui-print-links" class="block block-print-ui">

    
    
  
  <div class="content">
    <span class="print_html"><a href="https://hpc.llnl.gov/print/651" title="Display a printer-friendly version of this page." class="print-page" onclick="window.open(this.href); return false" rel="nofollow">Printer-friendly</a></span>  </div>
  
</div> <!-- /.block --></div>
 <!-- /.region -->
                            </div>
                        
                        <div id="content-wrap">
                                                                                                                <div class="region region-content">
  <div id="block-system-main" class="block block-system">

    
    
  
  <div class="content">
    

<div  about="/software/modules-and-software-packaging" typeof="sioc:Item foaf:Document" class="node node-user-portal-training-page node-full view-mode-full">


<div class="row">
<div class="col-sm-4 ">
<div class="field field-name-ds-portal-left-nav field-type-ds field-label-hidden"><div class="field-items"><div class="field-item even"><div id="block-menu-block-2" class="block block-menu-block">

    
    
  
  <div class="content">
    <!--<div class=" well" style="padding: 8px 0;">
  </div>


-->
<div class="menu-block-wrapper menu-block-2 menu-name-menu-user-portal-menu parent-mlid-0 menu-level-2 panel panel-primary">
<div class="panel-heading">
<a href='/software' style='color: white'>Software</a> </div>


  <div class="content panel-body" style="padding: 8px 0;">
     <ul class="menu"><li class="first leaf menu-mlid-441"><a href="/software/archival-storage-software">Archival Storage Software</a></li>
<li class="collapsed menu-mlid-438"><a href="/software/data-management-tools-projects">Data Management Tools</a></li>
<li class="collapsed menu-mlid-1726"><a href="/software/development-environment-software">Development Environment Software</a></li>
<li class="leaf menu-mlid-1997"><a href="/software/mathematical-software">Mathematical Software</a></li>
<li class="leaf active-trail active menu-mlid-2154"><a href="/software/modules-and-software-packaging" class="active-trail active">Modules and Software Packaging</a></li>
<li class="collapsed menu-mlid-1627"><a href="/software/visualization-software">Visualization Software</a></li>
<li class="last leaf menu-mlid-2314"><a href="https://computing.llnl.gov/projects/radiuss" title="">RADIUSS</a></li>
</ul>  </div>
  
</div> <!-- /.block -->  </div>
  
</div> <!-- /.block --></div></div></div><div class="field field-name-ds-lc-hotline-block field-type-ds field-label-hidden"><div class="field-items"><div class="field-item even"><div class="hotline-block-with-icons">
<div class="pull-left"><span class="h3 fa fa-phone circle-icon-red sidebar-icon"> </span></div><div class="pull-left"><h3 class="shrink-for-tablet padding-vcenter">LC Hotline: <span><a href="tel:24531">2-4531</a></span></h3><p class="h3-caption shrink-for-tablet">From offsite: <a href="tel:19254224531">(925) 422-4531</a></p>
</div>

<div class="clear clear-float"></div>
<div>
<div class="pull-left"><span class="h3 fa fa-clock-o circle-icon-blue padding-for-v-centering"> </span></div><div class="pull-left"><h3 class="shrink-for-tablet">Hours</h3><p class="less-line-height shrink-for-tablet h3-caption small smaller-bottom-margin">Monday–Friday<br />8am–12pm, 1–4:45pm<br />B453 R1103 | Q-clearance area</p></div>

<div class="clear clear-float"></div>

<div>
<div class="pull-left"><span class="h3 fa fa-question circle-icon"> </span></div><div class="pull-left"><h3 class="shrink-for-tablet reduced-line-height padding-vcenter pull-right"><a href="/where_to_get_help">Should I Call LC Hotline<br />or LivIT?</a></h3></div><div class="clear clear-float"></div>
<hr /></div></div></div></div></div></div></div>

<div class="col-sm-8 ">
<div class="field field-name-title field-type-ds field-label-hidden"><div class="field-items"><div class="field-item even" property="dc:title"><h1 class="title">Modules and Software Packaging</h1></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>Livermore Computing uses LMod modules for packaging much of the software available on LC systems, including compilers, MPI, CUDA, debuggers, performance tools and math libraries.  LMod is a hierarchical module system originally developed at TACC (Texas Advanced Computer Center). It can be used to easily manage your environment in complex many-compiler and many-MPI systems.  For example, perhaps you want to use gcc 4.9.3 as your compiler, MVAPICH2 2.2 as your MPI implementation, and use HDF5 when building your code.  By issuing a few LMod commands like the following:</p>
<p>% module load gcc/4.9.3<br />% module load mvapich2/2.2<br />% module load hdf5</p>
<p>your PATH will be set to point at an mpicc command that used gcc 4.9.3 and mvapich2 2.2, along with having HDF5 in your LD_LIBRARY_PATH and LIBRARY_PATH.  It's worth noting that LMod is helping setup your environment.  It's not creating new files or making anything new accessible to you.  It's also valid to use these packages by manually setting environment variables or using full paths.</p>
<p>Since LMod is a re-implementation and extension of the module system that is found on Cray and many other systems, many commands may be familiar to people.  All commands begin by invoking module.</p>
<h2>Basic LMod Commands</h2>
<p>The table below summarizes the most common LMod module commands. Discussions on several common module topics follows. Full documentation for LMod modules can be found at: <a href="https://www.tacc.utexas.edu/research-development/tacc-projects/lmod" target="_blank">https://www.tacc.utexas.edu/research-development/tacc-projects/lmod</a>. The direct link to the User Guide is: <a href="https://lmod.readthedocs.io/en/latest/010_user.html" target="_blank">http://lmod.readthedocs.io/en/latest/010_user.html</a>.</p>
<table class="table-bordered table-striped" summary="Basic LMod Commands"><tr><th scope="col">Module Command</th>
<th scope="col">Shortcut</th>
<th scope="col">Description</th>
</tr><tr><td>module avail</td>
<td>ml avail</td>
<td>List available modules</td>
</tr><tr><td>module list</td>
<td>ml</td>
<td>Show modules currently loaded</td>
</tr><tr><td>module load <em>package</em><br />module add <em>package</em></td>
<td>ml load <em>package</em><br />ml add <em>package</em></td>
<td>Load a selected module</td>
</tr><tr><td>module unload <em>package</em><br />module rm <em>package</em></td>
<td>ml unload <em>package</em><br />ml rm <em>package</em></td>
<td>Unload a previously loaded module</td>
</tr><tr><td>module swap <em>package1 package2</em></td>
<td>ml swap <em>package1 package2</em></td>
<td>Unload package1 and load package2</td>
</tr><tr><td>module purge</td>
<td>ml purge</td>
<td>Unload all loaded modules</td>
</tr><tr><td>module reset</td>
<td>ml reset</td>
<td>Reset loaded modules to system defaults</td>
</tr><tr><td>module display <em>package</em><br />module show <em>package</em></td>
<td>n/a<br />ml show <em>package</em></td>
<td>Display the contents of a selected module</td>
</tr><tr><td>module spider</td>
<td>ml spider</td>
<td>List all modules (not just available ones)</td>
</tr><tr><td>module spider <em>package</em></td>
<td>ml spider <em>package</em></td>
<td>Display description of a selected module</td>
</tr><tr><td>module keyword <em>key</em></td>
<td>ml keyword <em>key</em></td>
<td>Search for available modules by keyword</td>
</tr><tr><td>module, module help</td>
<td>ml help</td>
<td>Display help, usage information for modules</td>
</tr><tr><td>module use <em>path</em></td>
<td>ml use <em>path</em></td>
<td>Add <em>path </em>to the MODULPATH search path</td>
</tr></table><h2>Setting Up the Modules Environment</h2>
<p>The modules environment should be setup by default upon login, however, there are some known cases where a user may get a "module: command not found" error. One such instance is for csh/tcsh users who try to run scripts that do not explicitly "#!/usr/bin/csh" or "#!/usr/bin/tcsh" or for csh/tcsh users who run scripts that invoke "#!/bin/sh". To work around this, users are advised to always source the appropriate script in /usr/share/lmod/lmod/init/. For example:</p>
<pre>#!/bin/sh
if test -e /usr/share/lmod/lmod/init/sh
then
  . /usr/share/lmod/lmod/init/sh
fi
module list</pre><h2>Loading Packages</h2>
<p>New packages can be loaded into your environment with the module load command:</p>
<pre>% which git
/usr/bin/git
% module load git/2.8.3
% which git
/usr/tce/packages/git/git-2.8.3/bin/git</pre><h2>Unloading Packages</h2>
<p>Packages can be unloaded with the module unload command:</p>
<pre>% module unload git
% which git
/usr/bin/git</pre><h2>Listing Packages</h2>
<p>To see what modules are available now, use the module avail command:</p>
<pre>% module avail
------------------ /usr/tce/modulefiles/Compiler/intel/16.0.3 ------------------
   mvapich2/2.2 (L)    openmpi/1.10.2
-------------------------- /usr/tce/modulefiles/Core ---------------------------
   StdEnv         (L)    inspector/2016.3          opt
   cmake/3.5.2           intel/16.0.2              stat/2.2.0
   dyninst/9.1.0         intel/16.0.3     (L,D)    totalview/2016.01.06
   gcc/4.8-redhat        launchmon/1.0.2           totalview/2016.04.08 (D)
   gcc/4.9.3      (D)    ld-auto-rpath             vtune/2016.3
   git/2.8.3      (L)    mkl/11.3.3
   graphlib/2.0.0        mrnet/5.0.1
-------------------- /usr/share/lmod/lmod/modulefiles/Core ---------------------
   lmod/6.0.15    settarg/6.0.15

  Where:
   L:  Module is loaded
   D:  Default Module

Use "module spider" to find all possible modules.
Use "module keyword key1 key2 ..." to search for all possible modules matching
any of the "keys".</pre><p>This shows us what modules are current loaded by marking them with an (L).  Other modules are marked as defaults with a (D), and those are the versions of modules will be loaded if you don't specify a version number when loading that module (e.g, the command module load totalview will load version 2016.04.08).</p>
<h2>Module Hierarchy</h2>
<p>LMod can load modules in a hierarchical order, which means that loading module A may make module B become available.  TOSS 3 uses this when loading compilers and MPIs. Loading a specific compiler makes all compatible MPIs appear as available modules, and loading an MPI makes compatible MPI packages appear.  For example,</p>
<pre>% module purge
% module avail

-------------------------- /usr/tce/modulefiles/Core ---------------------------
   StdEnv                inspector/2016.3        opt
   cmake/3.5.2           intel/16.0.2            stat/2.2.0
   dyninst/9.1.0         intel/16.0.3     (D)    totalview/2016.01.06
   gcc/4.8-redhat        launchmon/1.0.2         totalview/2016.04.08 (D)
   gcc/4.9.3      (D)    ld-auto-rpath           vtune/2016.3
   git/2.8.3             mkl/11.3.3
   graphlib/2.0.0        mrnet/5.0.1

% module load intel/16.0.3
% module avail

------------------ /usr/tce/modulefiles/Compiler/intel/16.0.3 ------------------
   impi/5.1.3    mvapich2/2.2    openmpi/1.10.2

-------------------------- /usr/tce/modulefiles/Core ---------------------------
   StdEnv                inspector/2016.3          opt
   cmake/3.5.2           intel/16.0.2              stat/2.2.0
   dyninst/9.1.0         intel/16.0.3     (L,D)    totalview/2016.01.06
   gcc/4.8-redhat        launchmon/1.0.2           totalview/2016.04.08 (D)
   gcc/4.9.3      (D)    ld-auto-rpath             vtune/2016.3
   git/2.8.3             mkl/11.3.3
   graphlib/2.0.0        mrnet/5.0.1</pre><p>The initial module purge  command simply empties the environment (module reset would have moved it back to the initial defaults).  The first module avail doesn't list any MPIs available.  After issuing a module load intel/16.0.3, the next module avail shows the three MPI implementations,  impi/5.1.3, mvapich2/2.2 and openmpi/1.10.2, that are built by Intel 16.0.3.  After loading one of those MPIs, more packages may become available.</p>
<h2>List All Packages</h2>
<p>You may want to see all packages, not just ones that are currently available.  Use the module spider command to do so:</p>
<pre>% module spider
----------------------------------------------------------------------------
The following is a list of the modules currently available:
----------------------------------------------------------------------------
  ParaView: ParaView/5.0
  StdEnv: StdEnv
  cmake: cmake/3.5, cmake/3.5.2
  cudatoolkit: cudatoolkit/7.5
  dyninst: dyninst/9.1.0
  fftw: fftw/2.1
  gcc: gcc/4.8-redhat, gcc/4.9.3
  git: git/2.8.3
  graphlib: graphlib/2.0.0
  inspector: inspector/2016.3
  intel: intel/15.0, intel/16.0, intel/16.0.2, intel/16.0.3
  intel-mpi: intel-mpi/5.1
  ...</pre><p>You can also use spider to find out where in the hierarchy a specific module exists by passing it to module spider:</p>
<pre>% module spider mvapich2/2.2
-----------------------------------------------------------------------------------------------
  mvapich2: mvapich2/2.2
-----------------------------------------------------------------------------------------------
    This module can only be loaded through the following modules:
      gcc/4.8-redhat
      gcc/4.9.3
      intel/14.0.3
      intel/15.0.6
      intel/16.0.2
      intel/16.0.3</pre><h2>Swapping Packages</h2>
<p>With LMod you can swap out one level of the hierarchy with another while preserving which packages you have loaded with module swap:</p>
<pre>% module load intel
% module load mvapich2
% which mpicc
/usr/tce/packages/mvapich2/mvapich2-2.2-intel-16.0.3/bin/mpicc
% module swap intel gcc

Due to MODULEPATH changes the following have been reloaded:
  1) mvapich2/2.2

% which mpicc
/usr/tce/packages/mvapich2/mvapich2-2.2-gcc-4.9.3/bin/mpicc</pre><p>In this example, the module swap intel gcc command removed the intel compiler from the environment and reloaded it with the gcc compiler in its place.</p>
<h2>Module Families</h2>
<p>LC has defined certain module families, most notably for compilers and MPI libraries. Only one package from each family may be loaded at once. Loading a second module from a given family will effectively unload the first module from that family. The example below shows what happens when gcc and impi are loaded on top of the default intel and mvapich environment:</p>
<pre>% module list
Currently Loaded Modules:
  1) intel/16.0.3   2) mvapich2/2.2   3) StdEnv

% module load gcc
Lmod is automatically replacing "intel/16.0.3" with "gcc/4.9.3"

Due to MODULEPATH changes the following have been reloaded:
  1) mvapich2/2.2

% module list

Currently Loaded Modules:
  1) StdEnv   2) gcc/4.9.3   3) mvapich2/2.2

% module load impi
Lmod is automatically replacing "mvapich2/2.2" with "impi/5.1.3"

% module list

Currently Loaded Modules:
  1) StdEnv   2) gcc/4.9.3   3) impi/5.1.3</pre><p>In this example, the module load intel command removed the Intel compiler from the module environment and replaced it with the gcc compiler in its place (note that icc/icpc/ifort commands will still be accessible from our /usr/tce/bin compiler wrappers). Similarly, the module load impi command removed mvapich from the module environment and replaced it with the Intel MPI. To disable the single package per family behavior, a user may set their LMOD_EXPERT environment variable. The most typical scenario when a user may want to enable expert mode is when requiring use of a specific GNU compiler and a specific Intel compiler simultaneously. For example:</p>
<pre>% export LMOD_EXPERT=1

% module list

Currently Loaded Modules:
  1) intel/16.0.3   2) mvapich2/2.2   3) StdEnv

% module load gcc

% module list

Currently Loaded Modules:
  1) intel/16.0.3   2) StdEnv   3) gcc/4.9.3   4) mvapich2/2.2</pre><p>Using the expert mode is is not generally recommended, however, as it may cause confusion as to which compiler (i.e., does mpicc use GNU or Intel?) is being used with the MPI wrappers.</p>
<h2>Default Packages</h2>
<p>When you first log in LMod is configured to load a default environment, which is currently set to include the intel compiler and MVAPICH2.  You can change your default environment (or create other named environments) with the module save command:</p>
<pre>% which mpicc
/usr/tce/packages/mvapich2/mvapich2-2.2-intel-16.0.3/bin/mpicc
% module swap intel gcc

Due to MODULEPATH changes the following have been reloaded:
  1) mvapich2/2.2

% module save default
Saved current collection of modules to: default
Then with your next login:

% which mpicc
/usr/tce/packages/mvapich2/mvapich2-2.2-gcc-4.9.3/bin/mpicc</pre><h2>Using modules from a cron job</h2>
<p>Under normal shell login, we source these files to initialize modules depending on your shell:</p>
<pre>sh/bash/ksh users source /etc/profile.d/00-modulepath.sh
source /etc/profile.d/z00_lmod.sh
csh/tcsh users source /etc/profile.d/00-modulepath.csh
source /etc/profile.d/z00_lmod.csh</pre><p>These files may not be automatically sourced in your cron job environment.  To use modules from a cron job, write a script to manually source these files like in the following:</p>
<pre>% cat cronmodules
#!/bin/bash
source /etc/profile.d/00-modulepath.sh
source /etc/profile.d/z00_lmod.sh
module load openmpi

% chmod +x cronmodules

% crontab -e
* * * * * /path/to/cronmodules</pre><h2>Known module issues</h2>
<p>Sometimes it is necessary to reset the module cache. For example if you see an error like the following:</p>
<pre>Lmod has detected the following error:  Unable to load module: intel
     /usr/tce/modulefiles/Core/intel/16.0.3.lua : Empty or non-existent file

While processing the following module(s):
    Module fullname  Module Filename
    ---------------  ---------------
    intel/16.0.3     /usr/tce/modulefiles/Core/intel/16.0.3.lua
    StdEnv           /usr/tce/modulefiles/Core/StdEnv.lua</pre><p>To resolve this issue you can run rm –rf ~/.lmod.d/.cache.</p>
<h2>Creating Your Own Module Files</h2>
<p>Users and code teams can also create their own module files. Full documentation on how to create an LMod module is available at the <a href="https://lmod.readthedocs.io/en/latest/015_writing_modules.html" target="_blank">LMod webpage</a>. Below is a simple example using the LLNL-developed Stack Trace Analysis Tool (STAT). Various versions of STAT and its modules exist in the standard TCE environment:</p>
<pre>[lee218@rzwiz2:~]$ module avail stat

-------------------------- /usr/tce/modulefiles/Core ---------------------------
   stat/2.2.0    stat/3.0.0    stat/4.0.0    stat/4.0.1 (D)

  Where:
   D:  Default Module

Use "module spider" to find all possible modules.
Use "module keyword key1 key2 ..." to search for all possible modules matching
any of the "keys".</pre><p>There is also a development/test version of STAT available in the /collab/usr/global/tools space. This can be exposed via a new module file:</p>
<pre>[lee218@rzwiz2:~]$ cat /collab/usr/global/tools/stat/toss_3_x86_64_ib/modulefiles/stat/test.lua
help([[stat-debugger-test]])

whatis("Name: stat")
whatis("Version: test")
whatis("Category: Debugger")
whatis("URL: %{URL}")

prepend_path("PATH", "/collab/usr/global/tools/stat/toss_3_x86_64_ib/stat-test/bin")
prepend_path("MANPATH", "/collab/usr/global/tools/stat/toss_3_x86_64_ib/stat-test/share/man")
prepend_path("LD_LIBRARY_PATH", "/collab/usr/global/tools/stat/toss_3_x86_64_ib/stat-test/lib")</pre><p>From the previous <strong>module avail</strong> command, we did not see the test version. However, a user may run <strong>module use</strong> to find the appropriate stat/test.lua module file:</p>
<pre>[lee218@rzwiz2:~]$ module use /collab/usr/global/tools/stat/toss_3_x86_64_ib/modulefiles
[lee218@rzwiz2:~]$ module avail stat

---------- /collab/usr/global/tools/stat/toss_3_x86_64_ib/modulefiles ----------
   stat/test

-------------------------- /usr/tce/modulefiles/Core ---------------------------
   stat/2.2.0    stat/3.0.0    stat/4.0.0    stat/4.0.1 (D)

  Where:
   D:  Default Module

Use "module spider" to find all possible modules.
Use "module keyword key1 key2 ..." to search for all possible modules matching
any of the "keys".
[lee218@rzwiz2:~]$ which stat-gui
/usr/tce/bin/stat-gui
[lee218@rzwiz2:~]$ module load stat/test
[lee218@rzwiz2:~]$ which stat-gui
/collab/usr/global/tools/stat/toss_3_x86_64_ib/stat-test/bin/stat-gui
</pre><p>We can now see the test version of STAT available via modules and can be loaded.</p>
<p>Users and code teams can create their own modulefiles directories and populate it with .lua module files. The <strong>module use</strong> command effectively adds the specified path to the front of a user's <strong>MODULEPATH </strong>environment variable, which instructs lmod where to look for module files. Some code teams may desire having their application added to the default <strong>MODULEPATH</strong>. This is typically done by submitting a request to the LC Hotline, who can generate a symlink from<em> /usr/apps/modulefiles</em>, which is in the default <strong>MODULEPATH</strong>, to the code team's module directory. Once the symlink is created, users can manage module files and versions in the target directory.</p>
</div></div></div></div>

</div>
</div>


  </div>
  
</div> <!-- /.block --></div>
 <!-- /.region -->
                   		</div>
                  </main>
                </div>
      		</div>
    	</div>
	</div>
  	
	

    <footer id="colophon" class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 footer-top">

                    <a class="llnl" href="https://www.llnl.gov/" target="_blank"><img src="/sites/all/themes/tid/images/llnl.png" alt="LLNL"></a>
                    <p>
                        Lawrence Livermore National Laboratory
                        <br>7000 East Avenue • Livermore, CA 94550
                    </p>
                    <p>
                        Operated by Lawrence Livermore National Security, LLC, for the
                        <br>Department of Energy's National Nuclear Security Administration.
                    </p>
                    <div class="footer-top-logos">
                        <a class="nnsa" href="https://www.energy.gov/nnsa/national-nuclear-security-administration" target="_blank"><img src="/sites/all/themes/tid/images/nnsa2.png" alt="NNSA"></a>
                        <a class="doe" href="https://www.energy.gov/" target="_blank"><img src="/sites/all/themes/tid/images/doe_small.png" alt="U.S. DOE"></a>
                        <a class="llns" href="https://www.llnsllc.com/" target="_blank"><img src="/sites/all/themes/tid/images/llns.png" alt="LLNS"></a>
                	</div>



                </div>
                <div class="col-sm-12 footer-bottom">
                	

                    <span>UCRL-MI-131558  &nbsp;|&nbsp;&nbsp;</span><a href="https://www.llnl.gov/disclaimer" target="_blank">Privacy &amp; Legal Notice</a>	 &nbsp;|&nbsp;&nbsp; <a href="mailto:webmaster-comp@llnl.gov">Website Query</a> &nbsp;|&nbsp;&nbsp;<a href="/about-us/contact-us" >Contact Us</a>
                </div>
            </div>
        </div>
    </footer>
</div>
  </body>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/modules/contrib/jquery_update/replace/jquery/2.1/jquery.min.js?v=2.1.4"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/misc/jquery-extend-3.4.0.js?v=2.1.4"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/misc/jquery-html-prefilter-3.5.0-backport.js?v=2.1.4"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/misc/drupal.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/modules/contrib/extlink/extlink.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/themes/tid/js/jquery.flexslider.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/themes/tid/js/slide.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/modules/contrib/lightbox2/js/lightbox.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/modules/contrib/matomo/matomo.js?qsohrw"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var _paq = _paq || [];(function(){var u=(("https:" == document.location.protocol) ? "https://analytics.llnl.gov/" : "http://analytics.llnl.gov/");_paq.push(["setSiteId", "149"]);_paq.push(["setTrackerUrl", u+"piwik.php"]);_paq.push(["setDoNotTrack", 1]);_paq.push(["trackPageView"]);_paq.push(["setIgnoreClasses", ["no-tracking","colorbox"]]);_paq.push(["enableLinkTracking"]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.type="text/javascript";g.defer=true;g.async=true;g.src="https://hpc.llnl.gov/sites/default/files/matomo/piwik.js?qsohrw";s.parentNode.insertBefore(g,s);})();
//--><!]]>
</script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/themes/tid/js/bootstrap.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/themes/tid/js/mobilemenu.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/themes/tid/js/custom.js?qsohrw"></script>
<script type="text/javascript" src="https://hpc.llnl.gov/sites/all/themes/tid/js/mods.js?qsohrw"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"tid","theme_token":"NbDK4ni7mgc3Tgj52ZOURzTxbGAlsdKHtZzoe2DD07w","js":{"sites\/all\/modules\/contrib\/jquery_update\/replace\/jquery\/2.1\/jquery.min.js":1,"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/contrib\/extlink\/extlink.js":1,"sites\/all\/themes\/tid\/js\/jquery.flexslider.js":1,"sites\/all\/themes\/tid\/js\/slide.js":1,"sites\/all\/modules\/contrib\/lightbox2\/js\/lightbox.js":1,"sites\/all\/modules\/contrib\/matomo\/matomo.js":1,"0":1,"sites\/all\/themes\/tid\/js\/bootstrap.js":1,"sites\/all\/themes\/tid\/js\/mobilemenu.js":1,"sites\/all\/themes\/tid\/js\/custom.js":1,"sites\/all\/themes\/tid\/js\/mods.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/book\/book.css":1,"sites\/all\/modules\/contrib\/date\/date_api\/date.css":1,"sites\/all\/modules\/contrib\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/extlink\/extlink.css":1,"sites\/all\/modules\/contrib\/views\/css\/views.css":1,"sites\/all\/modules\/contrib\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/lightbox2\/css\/lightbox.css":1,"sites\/all\/modules\/contrib\/print\/print_ui\/css\/print_ui.theme.css":1,"sites\/all\/themes\/tid\/css\/bootstrap.css":1,"sites\/all\/themes\/tid\/css\/flexslider.css":1,"sites\/all\/themes\/tid\/css\/system.menus.css":1,"sites\/all\/themes\/tid\/css\/style.css":1,"sites\/all\/themes\/tid\/font-awesome\/css\/font-awesome.css":1,"sites\/all\/themes\/tid\/css\/treewalk.css":1,"sites\/all\/themes\/tid\/css\/popup.css":1,"sites\/all\/themes\/tid\/css\/mods.css":1}},"lightbox2":{"rtl":0,"file_path":"\/(\\w\\w\/)public:\/","default_image":"\/sites\/all\/modules\/contrib\/lightbox2\/images\/brokenimage.jpg","border_size":10,"font_color":"000","box_color":"fff","top_position":"","overlay_opacity":"0.8","overlay_color":"000","disable_close_click":true,"resize_sequence":0,"resize_speed":400,"fade_in_speed":400,"slide_down_speed":600,"use_alt_layout":false,"disable_resize":false,"disable_zoom":false,"force_show_nav":false,"show_caption":true,"loop_items":false,"node_link_text":"View Image Details","node_link_target":false,"image_count":"Image !current of !total","video_count":"Video !current of !total","page_count":"Page !current of !total","lite_press_x_close":"press \u003Ca href=\u0022#\u0022 onclick=\u0022hideLightbox(); return FALSE;\u0022\u003E\u003Ckbd\u003Ex\u003C\/kbd\u003E\u003C\/a\u003E to close","download_link_text":"","enable_login":false,"enable_contact":false,"keys_close":"c x 27","keys_previous":"p 37","keys_next":"n 39","keys_zoom":"z","keys_play_pause":"32","display_image_size":"original","image_node_sizes":"()","trigger_lightbox_classes":"","trigger_lightbox_group_classes":"","trigger_slideshow_classes":"","trigger_lightframe_classes":"","trigger_lightframe_group_classes":"","custom_class_handler":0,"custom_trigger_classes":"","disable_for_gallery_lists":true,"disable_for_acidfree_gallery_lists":true,"enable_acidfree_videos":true,"slideshow_interval":5000,"slideshow_automatic_start":true,"slideshow_automatic_exit":true,"show_play_pause":true,"pause_on_next_click":false,"pause_on_previous_click":true,"loop_slides":false,"iframe_width":600,"iframe_height":400,"iframe_border":1,"enable_video":false,"useragent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit\/605.1.15 (KHTML, like Gecko) Version\/13.1.1 Safari\/605.1.15 (Applebot\/0.1; +http:\/\/www.apple.com\/go\/applebot)"},"extlink":{"extTarget":0,"extClass":"ext","extLabel":"(link is external)","extImgClass":0,"extIconPlacement":0,"extSubdomains":1,"extExclude":".gov|.com|.org|.io|.be|.us|.edu","extInclude":"-int.llnl.gov|lc.llnl.gov|caas.llnl.gov|exchangetools.llnl.gov","extCssExclude":"","extCssExplicit":"","extAlert":"_blank","extAlertText":"This page is routing you to a page which requires extra authentication. You must have on-site or VPN access.\r\n\r\nPress OK to continue or cancel to return.\r\n\r\nIf this fails or times-out, you are not allowed access to the internal page or the server may be temporarily unavailable.\r\n\r\nIf you have an on-site or VPN account and are still having trouble, please send e-mail to lc-hotline@llnl.gov or call 925-422-4531 for further assistance.","mailtoClass":"mailto","mailtoLabel":"(link sends e-mail)"},"matomo":{"trackMailto":1},"urlIsAjaxTrusted":{"\/software\/modules-and-software-packaging":true}});
//--><!]]>
</script>
</html>
